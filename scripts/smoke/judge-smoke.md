# Judge LLM Smoke Test

Пошаговая проверка пайплайна сравнения ответов.

## Предусловия

- Запущен VR AI Dock (`npm run dev`).
- Настроены минимум два completion-профиля (например, ChatGPT и Generic HTTP) или один профиль для тестов.
- В `Prompt Router` доступны вкладки с ассистентами (хотя бы две).

## Сценарий

1. **Получить ответы ассистентов**
   - В Prompt Router вставьте один и тот же вопрос в 2 вкладки (например ChatGPT и Claude).
   - Дождитесь появления в чате минимум двух ответов ассистента подряд.

2. **Открыть Compare View**
   - Нажмите кнопку **Compare** в заголовке чата.
   - Убедитесь, что открылся экран Compare с вопросом и ответами, отмечены галочки минимум у двух ответов.

3. **Запустить Judge**
   - Выберите judge-профиль (по умолчанию подставляется активный).
   - Нажмите **Run Judge** — отображается индикатор прогресса, после завершения появляются оценки по 3 критериям, summary и verdict.

4. **Сменить профиль**
   - Вернитесь в Connections → Completions и выберите другой профиль (или отредактируйте текущий).
   - Запустите Judge повторно — баллы и сводка должны отличаться (при использовании разных моделей).

5. **Экспорт**
   - Нажмите **Export MD**, сохраните файл и откройте его — таблица и блоки соответствуют данному из UI.
   - Аналогично выполните **Export JSON**, убедитесь, что структура повторяет `JudgeResult` и ответы.

6. **Обработка ошибок**
   - В Compare View вручную очистите один из ответов и нажмите **Run Judge** — отображается тост/ошибка о недостатке ответов.
   - Принудительно отключите интернет и повторите запуск — появляется сообщение об ошибке и кнопка **Copy details**, текст копируется в буфер.

7. **Возврат к чату**
   - Нажмите **Back to Chat** — UI возвращается в основной экран, сравнение остаётся доступным через кнопку Compare.

## Ожидаемые результаты

- Judge генерирует оценки по трём критериям и краткий вывод.
- Смена judge-профиля влияет на оценки/вердикт.
- Экспорт создает корректный `.md` и `.json` без потери данных.
- Ошибки отображаются в Compare View, детализацию можно скопировать.
- UI остаётся отзывчивым, прогресс и состояние "Running…" отображаются без блокировок.
