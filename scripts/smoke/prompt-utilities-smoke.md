# Prompt Utilities Smoke Test

Шаги для ручной проверки функциональности шаблонов, переменных и истории вставок.

## Предусловия

- Собран и запущен VR AI Dock (`npm run dev`).
- Вновь созданный профиль пользователя (очистить `userData/templates.json` и `prompt-history.json`, либо запустить с новым `--user-data-dir`).
- Открыты минимум две вкладки с поддерживаемыми адаптерами (например ChatGPT и Claude).

## Сценарий

1. **Создание шаблона**
   - Откройте боковую кнопку *Prompts* → перейдите на экран *Prompt Templates*.
   - Нажмите *New Template*, заполните:
     - Title: `Bug triage`
     - Body: `Ticket {{ticketId}} – {{summary|no summary}}`
     - Tags: `support, triage`
   - Сохраните, убедитесь, что шаблон появился в списке.

2. **Вставка через диалог Templates**
   - В Prompt Router нажмите *Templates…*, выберите созданный шаблон.
   - Заполните переменные: `ticketId=VR-1001`, `summary=Payments fail`.
   - Выберите обе активные вкладки и нажмите *Insert + Send*.
   - Убедитесь, что текст появился/отправился в обеих BrowserView.

3. **История Recent**
   - В Prompt Router откройте выпадающий список *Recent*.
   - Убедитесь, что появилась запись `Bug triage`.
   - Выберите её → текст снова вставляется в ранее выбранные вкладки.

4. **Редактирование/дубликат**
   - В Prompt Templates отредактируйте шаблон (замените `summary` на `details`).
   - Создайте дубликат через *Duplicate* → убедитесь, что новая запись появилась с суффиксом `Copy`.

5. **Экспорт/Импорт**
   - Нажмите *Export*, сохраните файл JSON.
   - Удалите оба шаблона.
   - Нажмите *Import* → выберите ранее сохранённый JSON, убедитесь, что шаблоны восстановились.

6. **Очистка истории**
   - В Prompt Router несколько раз вставьте шаблон, убедитесь, что новых записей больше 3.
   - Через DevTools (или удалением файла `prompt-history.json`) очистите историю; перезапустите приложение и убедитесь, что список Recent пуст.

## Ожидаемые результаты

- Шаблоны/история переживают перезапуск (файлы в `userData` обновлены).
- Переменные корректно применяются с дефолтами.
- Insert и Insert + Send отображают тост *“Prompt inserted …”*.
- Повтор из Recent воспроизводит прошлые параметры и вкладки.
