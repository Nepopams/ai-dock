# VR AI Dock (React UI)

VR AI Dock вЂ” РґРµСЃРєС‚РѕРїРЅС‹Р№ РєР»РёРµРЅС‚ РЅР° Р±Р°Р·Рµ Electron РґР»СЏ СЂР°Р±РѕС‚С‹ СЃ РЅРµСЃРєРѕР»СЊРєРёРјРё AIвЂ‘СЃРµСЂРІРёСЃР°РјРё РІ РµРґРёРЅРѕРј РѕРєРЅРµ. РРЅС‚РµСЂС„РµР№СЃ СЂРµР°Р»РёР·РѕРІР°РЅ РЅР° React/Vite c СѓРїСЂР°РІР»РµРЅРёРµРј СЃРѕСЃС‚РѕСЏРЅРёРµРј С‡РµСЂРµР· Zustand, Р° Р±РµР·РѕРїР°СЃРЅРѕРµ РІР·Р°РёРјРѕРґРµР№СЃС‚РІРёРµ РјРµР¶РґСѓ renderer Рё main РѕСЂРіР°РЅРёР·РѕРІР°РЅРѕ С‡РµСЂРµР· СЃРѕР±СЃС‚РІРµРЅРЅС‹Рµ preloadвЂ‘РјРѕСЃС‚С‹ (nodeIntegration РІС‹РєР»СЋС‡РµРЅ, contextIsolation РІРєР»СЋС‡С‘РЅ).

## РћСЃРЅРѕРІРЅС‹Рµ РІРѕР·РјРѕР¶РЅРѕСЃС‚Рё

- **РњСѓР»СЊС‚РёвЂ‘РІРєР»Р°РґРєРё**: РѕС‚РґРµР»СЊРЅС‹Рµ BrowserView РґР»СЏ ChatGPT, Claude, DeepSeek, UX Pilot Рё Р»РѕРєР°Р»СЊРЅРѕРіРѕ С‡Р°С‚вЂ‘СЌРєСЂР°РЅР°. РЎРїРёСЃРѕРє РІРєР»Р°РґРѕРє Рё РёС… СЃРѕСЃС‚РѕСЏРЅРёРµ СЃРѕС…СЂР°РЅСЏСЋС‚СЃСЏ РІ `userData/tabs.json` Рё РІРѕСЃСЃС‚Р°РЅР°РІР»РёРІР°СЋС‚СЃСЏ РїСЂРё СЃР»РµРґСѓСЋС‰РµРј Р·Р°РїСѓСЃРєРµ.
- **Р­РєСЂР°РЅ вЂњChatвЂќ**:
  - СЃС‚СЂРёРјРёРЅРіРѕРІС‹Р№ С‡Р°С‚ СЃ РѕС‚РѕР±СЂР°Р¶РµРЅРёРµРј СЃС‚Р°С‚СѓСЃРѕРІ (`connecting`, `streaming`, `retrying`, `done`, `error`, `aborted`);
  - РёСЃС‚РѕСЂРёСЏ СЃРѕРѕР±С‰РµРЅРёР№ Рё РјРµС‚Р°РґР°РЅРЅС‹Рµ СЃРѕС…СЂР°РЅСЏСЋС‚СЃСЏ РІ `userData/ai-dock/chat/<conversationId>.json`;
  - Р°РІС‚РѕСЃРєСЂРѕР»Р» РїСЂРё РѕС‚РІРµС‚Р°С… Р°СЃСЃРёСЃС‚РµРЅС‚Р° Рё РёРЅРґРёРєР°С‚РѕСЂ `в†“ New messages`, РµСЃР»Рё РїРѕР»СЊР·РѕРІР°С‚РµР»СЊ РѕС‚СЃРєСЂРѕР»Р»РёР» РёСЃС‚РѕСЂРёСЋ РІРІРµСЂС…;
  - РІРѕР·РјРѕР¶РЅРѕСЃС‚СЊ РѕСЃС‚Р°РЅРѕРІРёС‚СЊ РіРµРЅРµСЂР°С†РёСЋ (`Stop`) РёР»Рё РѕС‚РїСЂР°РІРёС‚СЊ РїРѕРІС‚РѕСЂРЅС‹Р№ Р·Р°РїСЂРѕСЃ (`Retry`), СЌРєСЃРїРѕСЂС‚ РґРёР°Р»РѕРіР° РІ Markdown.
- **РџРѕРґРєР»СЋС‡РµРЅРёСЏ (Connections в†’ Completions)**:
  - СѓРїСЂР°РІР»РµРЅРёРµ РїСЂРѕС„РёР»СЏРјРё РјРѕРґРµР»РµР№ (OpenAIвЂ‘СЃРѕРІРјРµСЃС‚РёРјС‹С… Рё РєР°СЃС‚РѕРјРЅС‹С… Generic HTTP endpointвЂ™РѕРІ), С…СЂР°РЅРµРЅРёРµ С‚РѕРєРµРЅРѕРІ РІ `safeStorage` СЃ РїСЂРѕР·СЂР°С‡РЅС‹Рј `tokenRef` РІ `userData/completions.json`;
  - С‚РµСЃС‚ СЃРѕРµРґРёРЅРµРЅРёСЏ, РїРµСЂРµРєР»СЋС‡РµРЅРёРµ Р°РєС‚РёРІРЅРѕРіРѕ РїСЂРѕС„РёР»СЏ, РЅР°СЃС‚СЂРѕР№РєР° headers Рё СЃС…РµРјС‹ РѕС‚РІРµС‚Р° РґР»СЏ genericвЂ‘РґСЂР°Р№РІРµСЂР°.
- **Prompt Router**: Р±РѕРєРѕРІРѕР№ Drawer СЃ Р±РёР±Р»РёРѕС‚РµРєРѕР№ РїРѕРґСЃРєР°Р·РѕРє, СЂР°СЃСЃС‹Р»РєР° promptвЂ™РѕРІ РЅР° РІС‹Р±СЂР°РЅРЅС‹Рµ СЃРµСЂРІРёСЃС‹, РёРјРїРѕСЂС‚/СЌРєСЃРїРѕСЂС‚ СЃРѕС…СЂР°РЅС‘РЅРЅС‹С… С€Р°Р±Р»РѕРЅРѕРІ.
- **Р‘РµР·РѕРїР°СЃРЅРѕСЃС‚СЊ**: СЃС‚СЂРѕРіРёР№ CSP, `contextIsolation`, `sandbox`, СЂР°Р±РѕС‚Р° СЃ С„Р°Р№Р»РѕРІРѕР№ СЃРёСЃС‚РµРјРѕР№ РѕРіСЂР°РЅРёС‡РµРЅР° `userData`. Р’СЃРµ IPCвЂ‘РєР°РЅР°Р»С‹ РїСЂРѕС…РѕРґСЏС‚ С‡РµСЂРµР· preloadвЂ‘СЃР»РѕР№.

## РЎС‚СЂСѓРєС‚СѓСЂР° РїСЂРѕРµРєС‚Р°

```
src/
в”њв”Ђ main/            # Electron main-РїСЂРѕС†РµСЃСЃ: РѕРєРЅР°, IPC, СЃРµСЂРІРёСЃС‹, РґСЂР°Р№РІРµСЂС‹, storage
в”њв”Ђ preload/         # РјРѕСЃС‚С‹ exposeInMainWorld (chat, completions, API РѕР±РѕР»РѕС‡РєРё)
в”њв”Ђ renderer/
в”‚  в”њв”Ђ react/        # Vite + React UI, Zustand store, РєРѕРјРїРѕРЅРµРЅС‚С‹ Рё СЃС‚РёР»Рё
в”‚  в””в”Ђ index.html    # С‚РѕС‡РєР° РІС…РѕРґР° legacy webview (РѕСЃС‚Р°РІР»РµРЅР° РґР»СЏ СЃРѕРІРјРµСЃС‚РёРјРѕСЃС‚Рё)
в””в”Ђ types/           # РґРµРєР»Р°СЂР°С†РёРё С‚РёРїРѕРІ РґР»СЏ renderer (global window.*)
```

## РўСЂРµР±РѕРІР°РЅРёСЏ

- Node.js **18.x** РёР»Рё РЅРѕРІРµРµ (СЂРµРєРѕРјРµРЅРґСѓРµС‚СЃСЏ LTS)
- npm **9.x** РёР»Рё РЅРѕРІРµРµ
- Windows 10/11, macOS РёР»Рё Linux (Electron 31 РїРѕРґРґРµСЂР¶РёРІР°РµС‚ РІСЃРµ С‚СЂРё РћРЎ)

## РЈСЃС‚Р°РЅРѕРІРєР° Рё Р·Р°РїСѓСЃРє

```bash
git clone <repo-url>
cd ai-desktop
npm install
```

### Р РµР¶РёРј СЂР°Р·СЂР°Р±РѕС‚РєРё

```bash
# Р—Р°РїСѓСЃРє Vite (renderer) + Electron (main)
npm run dev:new-ui
```

РљРѕРјР°РЅРґР° `dev:new-ui` РїР°СЂР°Р»Р»РµР»СЊРЅРѕ РїРѕРґРЅРёРјР°РµС‚ Vite (`npm run dev`) Рё Electron (`npm run electron:dev`) СЃ СѓСЃС‚Р°РЅРѕРІР»РµРЅРЅРѕР№ РїРµСЂРµРјРµРЅРЅРѕР№ `AI_DOCK_REACT_UI=true`, С‡С‚РѕР±С‹ main-РїСЂРѕС†РµСЃСЃ Р·Р°РіСЂСѓР¶Р°Р» ReactвЂ‘РёРЅС‚РµСЂС„РµР№СЃ.

> РџСЂРёРјРµС‡Р°РЅРёРµ: РµСЃР»Рё Р·Р°РїСѓСЃРєР°РµС‚СЃСЏ С‚РѕР»СЊРєРѕ `npm run dev`, С‚Рѕ СЃС‚Р°СЂС‚СѓРµС‚ Р»РёС€СЊ ViteвЂ‘СЃРµСЂРІРµСЂ Р±РµР· ElectronвЂ‘РѕРєРЅР°.

### РџСЂРѕРґР°РєС€РЅвЂ‘СЃР±РѕСЂРєР°

```bash
npm run build        # СЃР±РѕСЂРєР° Vite
npm run electron:build   # СЃР±РѕСЂРєР° Electron РґРёСЃС‚СЂРёР±СѓС‚РёРІР° (Windows NSIS РїРѕ СѓРјРѕР»С‡Р°РЅРёСЋ)
```

Р“РѕС‚РѕРІС‹Рµ Р°СЂС‚РµС„Р°РєС‚С‹ Vite Р»РµР¶Р°С‚ РІ `src/renderer/react/dist`, СѓСЃС‚Р°РЅРѕРІС‰РёРє Electron вЂ” РІ `dist/`.

## Р Р°Р±РѕС‡РёРµ РєР°С‚Р°Р»РѕРіРё Рё РґР°РЅРЅС‹Рµ

- **РСЃС‚РѕСЂРёСЏ С‡Р°С‚РѕРІ**: `%APPDATA%/VR AI Dock/ai-dock/chat/` (РїРѕ РѕРґРЅРѕРјСѓ JSON РЅР° РґРёР°Р»РѕРі).
- **РџСЂРѕС„РёР»Рё completions**: `%APPDATA%/VR AI Dock/completions.json` + С€РёС„СЂРѕРІР°РЅРЅС‹Рµ С‚РѕРєРµРЅС‹ РІ `safeStorage`.
- **Tabs/СЃРµСЂРІРёСЃС‹**: `%APPDATA%/VR AI Dock/tabs.json`.
- **Р­РєСЃРїРѕСЂС‚ Markdown**: РґРёР°Р»РѕРі вЂњSave AsвЂ¦вЂќ РїСЂРµРґР»Р°РіР°РµС‚ РІС‹Р±СЂР°С‚СЊ РїСЂРѕРёР·РІРѕР»СЊРЅС‹Р№ РїСѓС‚СЊ, С„РѕСЂРјР°С‚ `*.md`.

РџСЂРё РЅРµРѕР±С…РѕРґРёРјРѕСЃС‚Рё СЃР±СЂРѕСЃР° СЃРѕСЃС‚РѕСЏРЅРёСЏ РґРѕСЃС‚Р°С‚РѕС‡РЅРѕ СѓРґР°Р»РёС‚СЊ СЃРѕРѕС‚РІРµС‚СЃС‚РІСѓСЋС‰РёРµ С„Р°Р№Р»С‹ РІ `userData` (РїСЂРёР»РѕР¶РµРЅРёРµ РґРѕР»Р¶РЅРѕ Р±С‹С‚СЊ Р·Р°РєСЂС‹С‚Рѕ).

## Р Р°Р±РѕС‚Р° СЃ С‡Р°С‚Р°РјРё

- РљР°Р¶РґР°СЏ РѕС‚РїСЂР°РІРєР° С„РѕСЂРјРёСЂСѓРµС‚ payload РІРёРґР° `{id, role, content, ts, meta}` Рё РїРµСЂРµРґР°С‘С‚ РїРѕР»РЅС‹Р№ СЃС‚РµРє СЃРѕРѕР±С‰РµРЅРёР№ РІ РґСЂР°Р№РІРµСЂ (short memory = РІСЃСЏ РїРѕСЃР»РµРґРѕРІР°С‚РµР»СЊРЅРѕСЃС‚СЊ РґРѕ РѕРіСЂР°РЅРёС‡РµРЅРёСЏ РјРѕРґРµР»Рё).
- РџРѕРґРґРµСЂР¶РёРІР°СЋС‚СЃСЏ СЃС‚Р°С‚СѓСЃС‹ РёСЃРїРѕР»СЊР·РѕРІР°РЅРёСЏ (`usage`) Рё `finishReason` РёР· OpenAIвЂ‘СЃРѕРІРјРµСЃС‚РёРјС‹С… РѕС‚РІРµС‚РѕРІ; РѕРЅРё РѕС‚РѕР±СЂР°Р¶Р°СЋС‚СЃСЏ РІ UI РїРѕРґ СЃРѕРѕР±С‰РµРЅРёРµРј Р°СЃСЃРёСЃС‚РµРЅС‚Р°.
- РњРµС…Р°РЅРёР·Рј Retry РїРѕРІС‚РѕСЂСЏРµС‚ РїРѕСЃР»РµРґРЅРёР№ Р·Р°РїСЂРѕСЃ СЃ СЃРѕС…СЂР°РЅС‘РЅРЅС‹Рј snapshotвЂ™РѕРј (user/assistant messageId + requestOptions).
- РљРЅРѕРїРєР° `Export` РІ РІРµСЂС…РЅРµРј РїСЂР°РІРѕРј СѓРіР»Сѓ СЃРѕС…СЂР°РЅСЏРµС‚ С‚РµРєСѓС‰РёР№ РґРёР°Р»РѕРі РІ Markdown.

## РџСЂРѕС„РёР»Рё Completions

- **OpenAI-compatible**: Р±Р°Р·РѕРІС‹Р№ URL (`baseUrl`), РјРѕРґРµР»СЊ РїРѕ СѓРјРѕР»С‡Р°РЅРёСЋ, С‚РѕРєРµРЅ (`Bearer`/`Basic`), РґРѕРїРѕР»РЅРёС‚РµР»СЊРЅС‹Рµ headers Рё С‚Р°Р№РјР°СѓС‚.
- **Generic HTTP**: РєРѕРЅС„РёРіСѓСЂРёСЂСѓРµРјС‹Р№ endpoint, РјРµС‚РѕРґ (`POST`/`GET`), С€Р°Р±Р»РѕРЅ JSONвЂ‘С‚РµР»Р° СЃ РїР»РµР№СЃС…РѕР»РґРµСЂР°РјРё `{{model}}`, `{{messages[]}}`, `{{stream}}` Рё РґСЂ., РѕРїРёСЃР°РЅРёРµ СЃС…РµРјС‹ РѕС‚РІРµС‚Р° (SSE / NDJSON / lines РёР»Рё buffer). РџРѕРґРґРµСЂР¶РёРІР°РµС‚СЃСЏ РёР·РІР»РµС‡РµРЅРёРµ usage С‡РµСЂРµР· JSONPathвЂ‘РїРѕРґРѕР±РЅС‹Рµ СЃС‚СЂРѕРєРё.
- РўРµСЃС‚ СЃРѕРµРґРёРЅРµРЅРёСЏ (`Test Connection`) РѕС‚РїСЂР°РІР»СЏРµС‚ pingвЂ‘Р·Р°РїСЂРѕСЃ СЃ С‚РµРєСѓС‰РёРјРё РЅР°СЃС‚СЂРѕР№РєР°РјРё Рё РѕС‚РѕР±СЂР°Р¶Р°РµС‚ usage/preview РёР»Рё РѕС€РёР±РєСѓ.

## Р Р°Р·СЂР°Р±РѕС‚РєР° Рё СЃС‚РёР»Рё

- Р“Р»РѕР±Р°Р»СЊРЅС‹Рµ СЃС‚РёР»Рё РЅР°С…РѕРґСЏС‚СЃСЏ РІ `src/renderer/react/styles/global.css`. Tailwind РЅРµ РёСЃРїРѕР»СЊР·СѓРµС‚СЃСЏ вЂ” РєР»Р°СЃСЃС‹ РєР°СЃС‚РѕРјРЅС‹Рµ.
- РљРѕРјРїРѕРЅРµРЅС‚С‹ React РѕСЂРіР°РЅРёР·РѕРІР°РЅС‹ РІ `src/renderer/react/components`, СЌРєСЂР°РЅС‹ вЂ” РІ `views`, СЃРѕСЃС‚РѕСЏРЅРёРµ вЂ” `store/useDockStore.ts` + СЃР»Р°Р№СЃС‹ РІ `store/chatSlice.ts` Рё РґСЂ.
- РџСЂРё РґРѕР±Р°РІР»РµРЅРёРё РЅРѕРІС‹С… IPC, СЂР°СЃС€РёСЂСЏР№С‚Рµ preload (`src/preload/preload.js`) Рё С‚РёРїС‹ `src/types/renderer.d.ts`.

## РџРѕР»РµР·РЅС‹Рµ РєРѕРјР°РЅРґС‹

| РљРѕРјР°РЅРґР° | РћРїРёСЃР°РЅРёРµ |
| --- | --- |
| `npm run dev` | РўРѕР»СЊРєРѕ Vite (renderer) вЂ” СѓРґРѕР±РЅРѕ РґР»СЏ РёР·РѕР»РёСЂРѕРІР°РЅРЅРѕР№ РІРµСЂСЃС‚РєРё |
| `npm run electron:dev` | РўРѕР»СЊРєРѕ Electron (main), РѕР¶РёРґР°РµС‚, С‡С‚Рѕ React СѓР¶Рµ СЃРѕР±СЂР°РЅ |
| `npm run dev:new-ui` | РџРѕР»РЅС‹Р№ РґРµРІ-СЂРµР¶РёРј (Vite + Electron) |
| `npm run build` | РЎР±РѕСЂРєР° React UI |
| `npm run start` | Р—Р°РїСѓСЃРє СЃРѕР±СЂР°РЅРЅРѕРіРѕ Electron (РёСЃРїРѕР»СЊР·СѓРµС‚ production build) |
| `npm run electron:build` | СЃР±РѕСЂРєР° СѓСЃС‚Р°РЅРѕРІС‰РёРєР°/РїР°РєРµС‚Р° |

## Р’РєР»Р°Рґ Рё С‚РµСЃС‚РёСЂРѕРІР°РЅРёРµ

РћС‚РґРµР»СЊРЅРѕРіРѕ С‚РµСЃС‚РѕРІРѕРіРѕ РєРѕРЅС‚СѓСЂР° РїРѕРєР° РЅРµС‚. РџРµСЂРµРґ Pull Request:

1. РЈР±РµРґРёС‚РµСЃСЊ, С‡С‚Рѕ `npm run dev:new-ui` СЂР°Р±РѕС‚Р°РµС‚ Р±РµР· РѕС€РёР±РѕРє Рё РїСЂРµРґСѓРїСЂРµР¶РґРµРЅРёР№ РІ РєРѕРЅСЃРѕР»Рё.
2. РџСЂРѕРІРµСЂСЊС‚Рµ, С‡С‚Рѕ РЅРѕРІС‹Рµ IPC Рё preloadвЂ‘СЌРєСЃРїРѕСЂС‚С‹ РѕРїРёСЃР°РЅС‹ РІ `src/types/renderer.d.ts`.
3. Р•СЃР»Рё РјРµРЅСЏСЋС‚СЃСЏ С„РѕСЂРјР°С‚С‹ С…СЂР°РЅРµРЅРёСЏ (historyFs/completions), РґРѕР±Р°РІСЊС‚Рµ РјРёРіСЂР°С†РёРё РёР»Рё РѕР±РЅРѕРІРёС‚Рµ README.

Р‘СѓРґСѓС‰РёРµ Р·Р°РґР°С‡Рё: unitвЂ‘С‚РµСЃС‚С‹ РґР»СЏ СЃРµСЂРІРёСЃРѕРІ (settings, historyFs, genericHttp), РІРёР·СѓР°Р»СЊРЅС‹Рµ С‚РµСЃС‚С‹ С‡Р°С‚вЂ‘СЌРєСЂР°РЅР°, Р°РІС‚РѕРјР°С‚РёС‡РµСЃРєР°СЏ СЃР±РѕСЂРєР° CI.

---

Р•СЃР»Рё РІРѕР·РЅРёРєР»Рё РІРѕРїСЂРѕСЃС‹ РїРѕ Р°СЂС…РёС‚РµРєС‚СѓСЂРµ РёР»Рё РёРЅС‚РµРіСЂР°С†РёРё РЅРѕРІС‹С… AIвЂ‘РїСЂРѕРІР°Р№РґРµСЂРѕРІ, СЃРј. СЂР°Р·РґРµР»С‹ `src/main/services/` Рё `src/main/providers/` вЂ” С‚Р°Рј РѕРїРёСЃР°РЅР° Р»РѕРіРёРєР° РїРѕРІС‚РѕСЂРЅС‹С… РїРѕРїС‹С‚РѕРє, С‚Р°Р№РјР°СѓС‚РѕРІ Рё РїРѕС‚РѕРєРѕРІРѕР№ РѕР±СЂР°Р±РѕС‚РєРё. РџСЂРё РґРѕР±Р°РІР»РµРЅРёРё РЅРѕРІРѕРіРѕ РґСЂР°Р№РІРµСЂР° РїСЂРёРґРµСЂР¶РёРІР°Р№С‚РµСЃСЊ С‚РµРєСѓС‰РµРіРѕ РїР°С‚С‚РµСЂРЅР° `async generator` Рё СЃС‚Р°РЅРґР°СЂС‚РЅС‹С… IPCвЂ‘РєР°РЅР°Р»РѕРІ (`chat:*`, `completions:*`). РЈРґР°С‡РЅРѕР№ СЂР°Р±РѕС‚С‹! рџ’Ў

## Registry & Categories

- РљРѕРЅС„РёРіСѓСЂР°С†РёСЏ РєР»РёРµРЅС‚РѕРІ (sidebar services) С…СЂР°РЅРёС‚СЃСЏ РІ `userData/registry.json`. РЎС‚СЂСѓРєС‚СѓСЂР° С„Р°Р№Р»Р° СЃРѕРѕС‚РІРµС‚СЃС‚РІСѓРµС‚ С‚РёРїСѓ `ServiceRegistryFile` (`src/shared/types/registry.ts`).
- UI РґР»СЏ СЂРµРґР°РєС‚РёСЂРѕРІР°РЅРёСЏ: `Connections в†’ Service Registry` (renderer). CRUD РїСЂРѕРєСЃРё РѕР±С‰Р°СЋС‚СЃСЏ СЃ main С‡РµСЂРµР· IPC (`registry:list|save|watch-*`), РёР·РјРµРЅРµРЅРёСЏ РїРѕРґС‚СЏРіРёРІР°СЋС‚СЃСЏ Р±РµР· РїРµСЂРµР·Р°РїСѓСЃРєР°.
- Р›СЋР±С‹Рµ РїСЂР°РІРєРё JSONвЂ‘С„Р°Р№Р»Р° РІРЅРµ РїСЂРёР»РѕР¶РµРЅРёСЏ Р°РІС‚РѕРјР°С‚РёС‡РµСЃРєРё РѕС‚СЃР»РµР¶РёРІР°СЋС‚СЃСЏ `fs.watch` СЃ debounce (СЃРј. `src/main/services/registry.ts`); watcher РїСЂРѕРіСЂРµРІР°РµС‚ РєСЌС€ Рё СѓРІРµРґРѕРјР»СЏРµС‚ РІСЃРµ rendererвЂ‘С‹ СЃРѕР±С‹С‚РёРµРј `registry:changed`.
- РџСЂРё РґРѕР±Р°РІР»РµРЅРёРё РєР»РёРµРЅС‚Р° СѓРєР°Р·С‹РІР°Р№С‚Рµ: `id` (СЃС‚Р°Р±РёР»СЊРЅС‹Р№), `title`, `category`, `adapterId`, `urlPatterns[]`, РѕРїС†РёРѕРЅР°Р»СЊРЅРѕ `icon`, `meta`. Р¤Р»Р°Рі `enabled` СѓРїСЂР°РІР»СЏРµС‚ РІРёРґРёРјРѕСЃС‚СЊСЋ РІ Sidebar.
- РўРѕРєРµРЅС‹/СЃРµРєСЂРµС‚С‹ РІ СЂРµРµСЃС‚СЂ РЅРµ РїРѕРјРµС‰Р°СЋС‚СЃСЏ: РѕРЅ РїСЂРµРґРЅР°Р·РЅР°С‡РµРЅ С‚РѕР»СЊРєРѕ РґР»СЏ РїСѓР±Р»РёС‡РЅС‹С… РїР°СЂР°РјРµС‚СЂРѕРІ РєР»РёРµРЅС‚РѕРІ. Р”Р»СЏ AIвЂ‘РїСЂРѕС„РёР»РµР№ РёСЃРїРѕР»СЊР·СѓР№С‚Рµ СЂР°Р·РґРµР» Completions Settings (СЃ Р±РµР·РѕРїР°СЃРЅС‹Рј `safeStorage`).

## Web Adapters v1

- Контракты адаптеров находятся в src/renderer/adapters/IAgentAdapter.ts.
- IPC-мост dapterBridge (main - renderer) исполняет DOM-скрипты в BrowserView (dapter:exec).
- Реализованы три адаптера: ChatGPT, Claude, DeepSeek (src/renderer/adapters/impl/*).
- Prompt Router поддерживает Insert / Insert+Send по вкладкам, отображает статусы для каждого таба.
- Overrides селекторов настраиваются в Settings > Connections > Adapter Overrides; данные сохраняются в egistry.json (client.meta.selectors).
- Health-check запускает dapter.healthCheck для активной вкладки; результата отображается рядом.
- Смоук-плейбук: scripts/smoke/adapters-smoke.md.
